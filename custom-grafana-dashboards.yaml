# Create configMap that will be detected and deployed by the grafana sidecar
# Create one ConfigMap per Dashboard
# https://github.com/grafana/helm-charts/tree/main/charts/grafana#sidecar-for-dashboards

apiVersion: v1
data:
  ee-scheduling.json: '{"annotations": {"list": [{"builtIn": 1,"datasource": {"type": "grafana","uid": "-- Grafana --"},"enable": true,"hide": true,"iconColor": "rgba(0, 211, 255, 1)","name": "Annotations & Alerts","type": "dashboard"}]},"editable": true,"fiscalYearStartMonth": 0,"graphTooltip": 0,"id": 27,"links": [],"panels": [{"collapsed": false,"gridPos": {"h": 1,"w": 24,"x": 0,"y": 0},"id": 18,"panels": [],"title": "Results","type": "row"},{"datasource": {"type": "prometheus","uid": "prometheus"},"fieldConfig": {"defaults": {"color": {"mode": "thresholds"},"mappings": [],"noValue": "Still Running","thresholds": {"mode": "absolute","steps": [{"color": "light-blue","value": null},{"color": "light-green","value": 48},{"color": "green","value": 54},{"color": "light-green","value": 66},{"color": "light-red","value": 72}]}},"overrides": []},"gridPos": {"h": 6,"w": 5,"x": 0,"y": 1},"id": 19,"options": {"minVizHeight": 75,"minVizWidth": 75,"orientation": "auto","reduceOptions": {"calcs": ["lastNotNull"],"fields": "/^TS$/","limit": 1,"values": false},"showThresholdLabels": false,"showThresholdMarkers": true,"sizing": "auto"},"pluginVersion": "11.5.1","targets": [{"editorMode": "code","exemplar": false,"expr": "(max(mub_experiment_finished_time_seconds{experiment_id=\"$experiment\"}) - max(mub_experiment_start_time_traces_seconds{experiment_id=\"$experiment\"})) / 60","instant": false,"legendFormat": "TS","range": true,"refId": "A"}],"title": "Total Time","transformations": [{"id": "filterByValue","options": {"filters": [{"config": {"id": "lower","options": {"value": "1"}},"fieldName": "TS"}],"match": "all","type": "exclude"}}],"type": "gauge"},{"description": "Generates a link to the result Dashboard when END timestamp is present","fieldConfig": {"defaults": {},"overrides": []},"gridPos": {"h": 6,"w": 19,"x": 5,"y": 1},"id": 21,"options": {"code": {"language": "plaintext","showLineNumbers": false,"showMiniMap": false},"content": "When the line below shows a timestamp you can \n\n    ${finished_experiment}\n\nOpen the link below **in a new tab/window** to the result dashboard with the timeframe to cover the exact experiment durations.\n\n<a href=\"./d/${result_dash_uid}/${result_dash_title}?orgId=1&from=${start_traces}&to=${finished_experiment}&timezone=utc\" target=\"_blank\">Result Dashboard</a>\n\n\n","mode": "markdown"},"pluginVersion": "11.5.1","title": "Result Dashboard","type": "text"},{"collapsed": false,"gridPos": {"h": 1,"w": 24,"x": 0,"y": 7},"id": 12,"panels": [],"title": "Experiment META","type": "row"},{"datasource": {"type": "prometheus","uid": "prometheus"},"fieldConfig": {"defaults": {"color": {"mode": "fixed"},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]},"unit": "string"},"overrides": []},"gridPos": {"h": 3,"w": 6,"x": 0,"y": 8},"id": 7,"options": {"colorMode": "value","graphMode": "none","justifyMode": "auto","orientation": "auto","percentChangeColorMode": "standard","reduceOptions": {"calcs": ["lastNotNull"],"fields": "/^TS$/","values": false},"showPercentChange": false,"textMode": "auto","wideLayout": true},"pluginVersion": "11.5.1","targets": [{"editorMode": "code","exemplar": false,"expr": "max(mub_experiment_start_time_deployments_seconds{experiment_id=\"$experiment\"}) * 1000","format": "time_series","instant": false,"legendFormat": "TS","range": true,"refId": "Time"}],"title": "START Deployments","transformations": [{"id": "convertFieldType","options": {"conversions": [{"destinationType": "time","targetField": "TS"}],"fields": {}}}],"type": "stat"},{"datasource": {"type": "prometheus","uid": "prometheus"},"fieldConfig": {"defaults": {"color": {"mode": "fixed"},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]},"unit": "string"},"overrides": []},"gridPos": {"h": 3,"w": 6,"x": 6,"y": 8},"id": 8,"options": {"colorMode": "value","graphMode": "none","justifyMode": "auto","orientation": "auto","percentChangeColorMode": "standard","reduceOptions": {"calcs": ["lastNotNull"],"fields": "/^TS$/","values": false},"showPercentChange": false,"textMode": "auto","wideLayout": true},"pluginVersion": "11.5.1","targets": [{"editorMode": "code","exemplar": false,"expr": "max(mub_experiment_start_time_traces_seconds{experiment_id=\"$experiment\"}) * 1000","format": "time_series","instant": false,"legendFormat": "TS","range": true,"refId": "Time"}],"title": "START TRACES","transformations": [{"id": "filterByValue","options": {"filters": [{"config": {"id": "lower","options": {"value": "1"}},"fieldName": "TS"}],"match": "all","type": "exclude"}},{"id": "convertFieldType","options": {"conversions": [{"destinationType": "time","targetField": "TS"}],"fields": {}}}],"type": "stat"},{"datasource": {"type": "prometheus","uid": "prometheus"},"fieldConfig": {"defaults": {"color": {"mode": "fixed"},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]},"unit": "string"},"overrides": []},"gridPos": {"h": 3,"w": 6,"x": 12,"y": 8},"id": 9,"options": {"colorMode": "value","graphMode": "none","justifyMode": "auto","orientation": "auto","percentChangeColorMode": "standard","reduceOptions": {"calcs": ["lastNotNull"],"fields": "/^TS$/","values": false},"showPercentChange": false,"textMode": "auto","wideLayout": true},"pluginVersion": "11.5.1","targets": [{"editorMode": "code","exemplar": false,"expr": "max(mub_experiment_finished_time_estimated_seconds{experiment_id=\"$experiment\"}) * 1000","format": "time_series","instant": false,"legendFormat": "TS","range": true,"refId": "Time"}],"title": "END ESTIMATE","transformations": [{"id": "filterByValue","options": {"filters": [{"config": {"id": "lower","options": {"value": "1"}},"fieldName": "TS"}],"match": "all","type": "exclude"}},{"id": "convertFieldType","options": {"conversions": [{"destinationType": "time","targetField": "TS"}],"fields": {}}}],"type": "stat"},{"datasource": {"type": "prometheus","uid": "prometheus"},"fieldConfig": {"defaults": {"color": {"mode": "fixed"},"mappings": [],"noValue": "Still Running","thresholds": {"mode": "absolute","steps": [{"color": "green","value": null}]},"unit": "string"},"overrides": []},"gridPos": {"h": 3,"w": 6,"x": 18,"y": 8},"id": 10,"options": {"colorMode": "value","graphMode": "none","justifyMode": "auto","orientation": "auto","percentChangeColorMode": "standard","reduceOptions": {"calcs": ["lastNotNull"],"fields": "/^TS$/","values": false},"showPercentChange": false,"textMode": "auto","wideLayout": true},"pluginVersion": "11.5.1","targets": [{"editorMode": "code","exemplar": false,"expr": "max(mub_experiment_finished_time_seconds{experiment_id=\"$experiment\"}) * 1000","format": "time_series","instant": false,"interval": "","legendFormat": "TS","range": true,"refId": "Time"}],"title": "END FINISHED","transformations": [{"id": "filterByValue","options": {"filters": [{"config": {"id": "lower","options": {"value": "1"}},"fieldName": "TS"}],"match": "all","type": "exclude"}},{"id": "convertFieldType","options": {"conversions": [{"destinationType": "time","targetField": "TS"}],"fields": {}}}],"type": "stat"},{"collapsed": false,"gridPos": {"h": 1,"w": 24,"x": 0,"y": 11},"id": 14,"panels": [],"title": "Progress","type": "row"},{"datasource": {"type": "prometheus","uid": "prometheus"},"description": "","fieldConfig": {"defaults": {"color": {"mode": "continuous-greens"},"mappings": [],"min": 0,"thresholds": {"mode": "percentage","steps": [{"color": "blue","value": null}]}},"overrides": []},"gridPos": {"h": 4,"w": 4,"x": 0,"y": 12},"id": 13,"options": {"minVizHeight": 75,"minVizWidth": 75,"orientation": "auto","reduceOptions": {"calcs": ["lastNotNull"],"fields": "/^DEPLOYED$/","values": false},"showThresholdLabels": false,"showThresholdMarkers": false,"sizing": "auto"},"pluginVersion": "11.5.1","targets": [{"editorMode": "code","exemplar": false,"expr": "sum(mub_deployed_services_total{experiment_id=\"$experiment\"})","instant": false,"legendFormat": "DEPLOYED","range": true,"refId": "A"},{"datasource": {"type": "prometheus","uid": "prometheus"},"editorMode": "code","exemplar": false,"expr": "mub_experiment_ms_count{experiment_id=\"$experiment\"}","hide": false,"instant": false,"legendFormat": "ALL","range": true,"refId": "B"}],"title": "Deployed MS","type": "gauge"},{"datasource": {"type": "prometheus","uid": "prometheus"},"description": "","fieldConfig": {"defaults": {"color": {"mode": "continuous-greens"},"mappings": [],"min": 0,"thresholds": {"mode": "percentage","steps": [{"color": "blue","value": null}]}},"overrides": []},"gridPos": {"h": 4,"w": 4,"x": 4,"y": 12},"id": 15,"options": {"minVizHeight": 75,"minVizWidth": 75,"orientation": "auto","reduceOptions": {"calcs": ["lastNotNull"],"fields": "/^PROCESSED$/","values": false},"showThresholdLabels": false,"showThresholdMarkers": false,"sizing": "auto"},"pluginVersion": "11.5.1","targets": [{"editorMode": "code","exemplar": false,"expr": "mub_processed_requests_total{experiment_id=\"$experiment\"}","instant": false,"legendFormat": "PROCESSED","range": true,"refId": "A"},{"datasource": {"type": "prometheus","uid": "prometheus"},"editorMode": "code","exemplar": false,"expr": "mub_experiment_trace_count{experiment_id=\"$experiment\"}","hide": false,"instant": false,"legendFormat": "ALL","range": true,"refId": "B"}],"title": "Processed Requests","type": "gauge"},{"datasource": {"type": "prometheus","uid": "prometheus"},"description": "","fieldConfig": {"defaults": {"color": {"fixedColor": "#808080","mode": "thresholds"},"mappings": [],"min": 0,"thresholds": {"mode": "absolute","steps": [{"color": "blue","value": null},{"color": "#EAB839","value": 5},{"color": "red","value": 10}]}},"overrides": []},"gridPos": {"h": 4,"w": 4,"x": 8,"y": 12},"id": 16,"options": {"minVizHeight": 75,"minVizWidth": 75,"orientation": "auto","reduceOptions": {"calcs": ["lastNotNull"],"fields": "/^PENDING$/","values": false},"showThresholdLabels": false,"showThresholdMarkers": false,"sizing": "auto"},"pluginVersion": "11.5.1","targets": [{"editorMode": "code","exemplar": false,"expr": "mub_pending_requests{experiment_id=\"$experiment\"}","instant": false,"legendFormat": "PENDING","range": true,"refId": "A"}],"title": "Pending Requests","type": "gauge"},{"datasource": {"type": "prometheus","uid": "prometheus"},"description": "","fieldConfig": {"defaults": {"color": {"mode": "continuous-GrYlRd"},"mappings": [],"min": 0,"noValue": "0","thresholds": {"mode": "absolute","steps": [{"color": "blue","value": null},{"color": "red","value": 1}]}},"overrides": []},"gridPos": {"h": 4,"w": 4,"x": 12,"y": 12},"id": 17,"options": {"minVizHeight": 75,"minVizWidth": 75,"orientation": "auto","reduceOptions": {"calcs": ["lastNotNull"],"fields": "/^ERROR$/","values": false},"showThresholdLabels": false,"showThresholdMarkers": false,"sizing": "auto"},"pluginVersion": "11.5.1","targets": [{"editorMode": "code","exemplar": false,"expr": "mub_timing_error_requests_total{experiment_id=\"$experiment\"}","instant": false,"legendFormat": "ERROR","range": true,"refId": "A"},{"datasource": {"type": "prometheus","uid": "prometheus"},"editorMode": "code","exemplar": false,"expr": "mub_experiment_trace_count{experiment_id=\"$experiment\"}","hide": false,"instant": false,"legendFormat": "ALL","range": true,"refId": "B"}],"title": "Request Timing Errors","type": "gauge"},{"collapsed": false,"gridPos": {"h": 1,"w": 24,"x": 0,"y": 16},"id": 11,"panels": [],"repeat": "no","title": "$no","type": "row"},{"datasource": {"type": "prometheus","uid": "${ds}"},"fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "auto","barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "smooth","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"fieldMinMax": false,"mappings": [{"options": {"10.10.1.1:9100": {"index": 0,"text": "a"}},"type": "value"}],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null}]},"unit": "watt"},"overrides": []},"gridPos": {"h": 5,"w": 24,"x": 0,"y": 17},"id": 20,"interval": "10s","options": {"legend": {"calcs": [],"displayMode": "list","placement": "right","showLegend": true,"width": 250},"tooltip": {"hideZeros": false,"mode": "single","sort": "none"}},"pluginVersion": "11.5.1","targets": [{"datasource": {"type": "prometheus","uid": "${ds}"},"editorMode": "code","expr": "node_ipmi_power_watts{node_name=~\"$no\", sensor=~\"$sensor\"}","interval": "","legendFormat": "{{node_name}} {{sensor}}","range": true,"refId": "A"}],"title": "Power Constumption (Watt)","type": "timeseries"},{"datasource": {"type": "prometheus","uid": "prometheus"},"description": "","fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "auto","barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "linear","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]},"unit": "ms"},"overrides": []},"gridPos": {"h": 5,"w": 24,"x": 0,"y": 22},"id": 22,"options": {"legend": {"calcs": [],"displayMode": "list","placement": "right","showLegend": true,"width": 250},"tooltip": {"hideZeros": false,"mode": "single","sort": "none"}},"pluginVersion": "11.5.1","targets": [{"datasource": {"type": "prometheus","uid": "prometheus"},"editorMode": "code","exemplar": true,"expr": "sum by (pod) (increase(mub_request_processing_latency_milliseconds_sum{node=~\"$no\", namespace=~\"$ns\"}[2m])) / sum by (pod) (increase(mub_request_processing_latency_milliseconds_count{node=~\"$no\", namespace=~\"$ns\"}[2m]))","interval": "","legendFormat": "{{pod}}","range": true,"refId": "A"}],"title": "Service delay","type": "timeseries"},{"datasource": {"type": "prometheus","uid": "prometheus"},"description": "","fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "auto","barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "linear","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]},"unit": "ms"},"overrides": []},"gridPos": {"h": 5,"w": 24,"x": 0,"y": 27},"id": 23,"options": {"legend": {"calcs": [],"displayMode": "list","placement": "right","showLegend": true,"width": 250},"tooltip": {"hideZeros": false,"mode": "single","sort": "none"}},"pluginVersion": "11.5.1","targets": [{"datasource": {"type": "prometheus","uid": "prometheus"},"editorMode": "code","exemplar": true,"expr": "sum by (pod) (increase(mub_internal_processing_latency_milliseconds_sum{node=~\"$no\", namespace=~\"$ns\"}[2m])) / sum by (pod) (increase(mub_internal_processing_latency_milliseconds_count{node=~\"$no\", namespace=~\"$ns\"}[2m]))","interval": "","legendFormat": "{{pod}}","range": true,"refId": "A"}],"title": "Internal Service delay","type": "timeseries"},{"datasource": {"type": "prometheus","uid": "${ds}"},"fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "auto","barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "linear","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]}},"overrides": []},"gridPos": {"h": 5,"w": 24,"x": 0,"y": 32},"id": 5,"interval": "10","options": {"legend": {"calcs": [],"displayMode": "list","placement": "right","showLegend": true,"width": 250},"tooltip": {"hideZeros": false,"mode": "single","sort": "none"}},"pluginVersion": "11.5.1","targets": [{"datasource": {"type": "prometheus","uid": "${ds}"},"editorMode": "code","expr": "rate(container_cpu_usage_seconds_total{job=\"kubelet\", metrics_path=\"/metrics/cadvisor\", namespace=~\"$ns\", node=~\"$no\"}[30s])","interval": "1m","legendFormat": "{{pod}}","range": true,"refId": "A"}],"title": "CPU Usage","type": "timeseries"},{"datasource": {"type": "prometheus","uid": "${ds}"},"fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "auto","barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "linear","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]},"unit": "bytes"},"overrides": []},"gridPos": {"h": 5,"w": 24,"x": 0,"y": 37},"id": 1,"options": {"legend": {"calcs": [],"displayMode": "list","placement": "right","showLegend": true,"width": 250},"tooltip": {"hideZeros": false,"mode": "single","sort": "none"}},"pluginVersion": "11.5.1","targets": [{"datasource": {"type": "prometheus","uid": "${ds}"},"editorMode": "code","expr": "sum(container_memory_working_set_bytes{job=\"kubelet\", metrics_path=\"/metrics/cadvisor\", cluster=\"\", namespace=~\"$ns\", node=~\"$no\"}) by (pod)","interval": "1m","legendFormat": "__auto","range": true,"refId": "A"}],"title": "Memory Usage (w/o cache)","type": "timeseries"}],"preload": false,"refresh": "10s","schemaVersion": 40,"tags": [],"templating": {"list": [{"current": {"text": "Prometheus","value": "prometheus"},"description": "","label": "datasource","name": "ds","options": [],"query": "prometheus","refresh": 1,"regex": "","type": "datasource"},{"current": {"text": ["All"],"value": ["$__all"]},"datasource": {"type": "prometheus","uid": "${ds}"},"definition": "label_values(kube_node_info{node!~\"node-0|node-1|node-2\"},node)","description": "","includeAll": true,"label": "node","multi": true,"name": "no","options": [],"query": {"qryType": 1,"query": "label_values(kube_node_info{node!~\"node-0|node-1|node-2\"},node)","refId": "PrometheusVariableQueryEditor-VariableQuery"},"refresh": 1,"regex": "","type": "query"},{"current": {"text": ["mubench"],"value": ["mubench"]},"datasource": {"type": "prometheus","uid": "${ds}"},"definition": "label_values(kube_namespace_status_phase{job=\"kube-state-metrics\"},namespace)","description": "","includeAll": true,"label": "namespace","multi": true,"name": "ns","options": [],"query": {"qryType": 1,"query": "label_values(kube_namespace_status_phase{job=\"kube-state-metrics\"},namespace)","refId": "PrometheusVariableQueryEditor-VariableQuery"},"refresh": 1,"regex": "","sort": 1,"type": "query"},{"current": {"text": ["PSU1_PIN"],"value": ["PSU1_PIN"]},"definition": "label_values(node_ipmi_power_watts,sensor)","label": "Sensor","multi": true,"name": "sensor","options": [],"query": {"qryType": 1,"query": "label_values(node_ipmi_power_watts,sensor)","refId": "PrometheusVariableQueryEditor-VariableQuery"},"refresh": 1,"regex": "","type": "query"},{"current": {"text": "1739648900796.06","value": "1739648900796.06"},"definition": "query_result(max(mub_experiment_start_time_traces_seconds*1000))","description": "","hide": 2,"name": "start_traces","options": [],"query": {"qryType": 3,"query": "query_result(max(mub_experiment_start_time_traces_seconds*1000))","refId": "PrometheusVariableQueryEditor-VariableQuery"},"refresh": 2,"regex": "\\{\\} (\\d+\\.\\d*) .*","type": "query"},{"allowCustomValue": false,"current": {"text": "2025-02-15_19-47-49","value": "2025-02-15_19-47-49"},"definition": "label_values(mub_experiment_start_time_deployments_seconds,experiment_id)","name": "experiment","options": [],"query": {"qryType": 1,"query": "label_values(mub_experiment_start_time_deployments_seconds,experiment_id)","refId": "PrometheusVariableQueryEditor-VariableQuery"},"refresh": 1,"regex": "","type": "query"},{"current": {"text": "","value": ""},"datasource": {"type": "prometheus","uid": "${ds}"},"definition": "query_result(max(mub_experiment_finished_time_seconds{experiment_id=\"$experiment\"}) * 1000)","description": "","hide": 2,"name": "finished_experiment","options": [],"query": {"qryType": 3,"query": "query_result(max(mub_experiment_finished_time_seconds{experiment_id=\"$experiment\"}) * 1000)","refId": "PrometheusVariableQueryEditor-VariableQuery"},"refresh": 2,"regex": "\\{\\} (\\d+\\.\\d*) .*","type": "query"},{"current": {"text": "ee-bench-results","value": "ee-bench-results"},"description": "Title of the result dashboard, required to build URL to that dashboard","hide": 2,"name": "result_dash_title","options": [{"selected": true,"text": "ee-bench-results","value": "ee-bench-results"}],"query": "ee-bench-results","type": "custom"},{"current": {"text": "aec2zsgqtnuo0e","value": "aec2zsgqtnuo0e"},"description": "UID of the result dashboard, required to build URL to that dashboard","hide": 2,"name": "result_dash_uid","options": [{"selected": true,"text": "aec2zsgqtnuo0e","value": "aec2zsgqtnuo0e"}],"query": "aec2zsgqtnuo0e","type": "custom"}]},"time": {"from": "now-30m","to": "now"},"timepicker": {},"timezone": "utc","title": "ee-bench","uid": "eeayt2o0nyq68b","version": 4,"weekStart": ""}'
kind: ConfigMap
metadata:
  labels:
    grafana_dashboard: "1"
  name: grafana-dashboard-ee-scheduling
---
apiVersion: v1
data:
  ee-scheduling-results.json: '{"annotations": {"list": [{"builtIn": 1,"datasource": {"type": "grafana","uid": "-- Grafana --"},"enable": true,"hide": true,"iconColor": "rgba(0, 211, 255, 1)","name": "Annotations & Alerts","type": "dashboard"}]},"editable": true,"fiscalYearStartMonth": 0,"graphTooltip": 0,"id": 26,"links": [],"panels": [{"datasource": {"type": "prometheus","uid": "${ds}"},"description": "","fieldConfig": {"defaults": {"color": {"mode": "continuous-GrYlRd"},"mappings": [],"min": 0,"thresholds": {"mode": "percentage","steps": [{"color": "blue","value": null},{"color": "red","value": 1}]},"unit": "percentunit"},"overrides": []},"gridPos": {"h": 4,"w": 7,"x": 0,"y": 0},"id": 17,"options": {"minVizHeight": 75,"minVizWidth": 75,"orientation": "auto","reduceOptions": {"calcs": ["lastNotNull"],"fields": "/^C$/","values": false},"showThresholdLabels": false,"showThresholdMarkers": false,"sizing": "auto"},"pluginVersion": "11.5.1","targets": [{"datasource": {"type": "prometheus","uid": "${ds}"},"editorMode": "code","exemplar": false,"expr": "max(mub_timing_error_requests_total)","instant": true,"legendFormat": "ERROR","range": false,"refId": "A"},{"datasource": {"type": "prometheus","uid": "${ds}"},"editorMode": "code","exemplar": false,"expr": "max(mub_experiment_trace_count)","hide": false,"instant": true,"legendFormat": "ALL","range": false,"refId": "B"},{"datasource": {"name": "Expression","type": "__expr__","uid": "__expr__"},"expression": "$A / $B","hide": false,"reducer": "mean","refId": "C","type": "math"}],"title": "Request Timing Errors","type": "gauge"},{"datasource": {"type": "prometheus","uid": "prometheus"},"description": "","fieldConfig": {"defaults": {"color": {"mode": "thresholds"},"decimals": 4,"mappings": [],"thresholds": {"mode": "percentage","steps": [{"color": "text","value": null},{"color": "green","value": 100},{"color": "#EAB839","value": 105},{"color": "red","value": 110}]},"unit": "none"},"overrides": []},"gridPos": {"h": 4,"w": 7,"x": 7,"y": 0},"id": 22,"options": {"colorMode": "value","graphMode": "area","justifyMode": "auto","orientation": "auto","percentChangeColorMode": "standard","reduceOptions": {"calcs": [],"fields": "/^ACTUAL$/","values": false},"showPercentChange": false,"textMode": "auto","wideLayout": true},"pluginVersion": "11.5.1","targets": [{"datasource": {"name": "Expression","type": "__expr__","uid": "__expr__"},"expression": "(${__to} - ${__from})/1000","hide": false,"refId": "ACTUAL","type": "math"}],"title": "Time Taken (seconds)","type": "stat"},{"datasource": {"type": "prometheus","uid": "prometheus"},"fieldConfig": {"defaults": {"color": {"mode": "thresholds"},"decimals": 4,"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "text","value": null}]},"unit": "watth"},"overrides": []},"gridPos": {"h": 4,"w": 7,"x": 0,"y": 4},"id": 23,"options": {"colorMode": "value","graphMode": "area","justifyMode": "auto","orientation": "auto","percentChangeColorMode": "standard","reduceOptions": {"calcs": ["lastNotNull"],"fields": "/^Wh$/","values": false},"showPercentChange": false,"textMode": "auto","wideLayout": true},"pluginVersion": "11.5.1","targets": [{"disableTextWrap": false,"editorMode": "builder","exemplar": false,"expr": "sum(avg_over_time(node_ipmi_power_watts{sensor=~\"$sensor\", node_name!~\"node-0|node-1|node-2\"}[10s]))","fullMetaSearch": false,"includeNullMetadata": true,"instant": true,"legendFormat": "watt_avg {{node_name}}","range": false,"refId": "WATT","useBackend": false},{"datasource": {"name": "Expression","type": "__expr__","uid": "__expr__"},"expression": "(${__to} - ${__from})/1000/3600","hide": false,"refId": "DUR_HOUR","type": "math"},{"datasource": {"name": "Expression","type": "__expr__","uid": "__expr__"},"expression": "$DUR_HOUR * $WATT","hide": false,"refId": "Wh","type": "math"}],"title": "Energy Consumption","type": "stat"},{"datasource": {"type": "prometheus","uid": "prometheus"},"description": "sum of all response times from runner perspective","fieldConfig": {"defaults": {"color": {"mode": "fixed"},"decimals": 3,"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "text","value": null}]},"unit": "none"},"overrides": []},"gridPos": {"h": 4,"w": 7,"x": 7,"y": 4},"id": 21,"options": {"colorMode": "none","graphMode": "none","justifyMode": "auto","orientation": "auto","percentChangeColorMode": "standard","reduceOptions": {"calcs": ["lastNotNull"],"fields": "","values": false},"showPercentChange": false,"textMode": "value","wideLayout": true},"pluginVersion": "11.5.1","targets": [{"disableTextWrap": false,"editorMode": "builder","exemplar": false,"expr": "sum(mub_request_latency_milliseconds_sum) / 1000","fullMetaSearch": false,"includeNullMetadata": true,"instant": true,"legendFormat": "__auto","range": false,"refId": "A","useBackend": false}],"title": "Total Response Time (seconds)","type": "stat"},{"fieldConfig": {"defaults": {},"overrides": []},"gridPos": {"h": 4,"w": 7,"x": 0,"y": 8},"id": 26,"options": {"code": {"language": "plaintext","showLineNumbers": false,"showMiniMap": false},"content": "```\r\n            10,000,000\r\n--------------------------------------\r\nenergy * total response time (seconds)\r\n```","mode": "markdown"},"pluginVersion": "11.5.1","title": "Score Formula","type": "text"},{"datasource": {"type": "prometheus","uid": "prometheus"},"description": "10,000,000 / (energy * total response time seconds)","fieldConfig": {"defaults": {"color": {"mode": "thresholds"},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "text","value": null}]}},"overrides": []},"gridPos": {"h": 4,"w": 7,"x": 7,"y": 8},"id": 25,"options": {"colorMode": "value","graphMode": "area","justifyMode": "auto","orientation": "auto","percentChangeColorMode": "standard","reduceOptions": {"calcs": ["lastNotNull"],"fields": "/^score$/","values": false},"showPercentChange": false,"textMode": "auto","wideLayout": true},"pluginVersion": "11.5.1","targets": [{"disableTextWrap": false,"editorMode": "builder","exemplar": false,"expr": "sum(avg_over_time(node_ipmi_power_watts{sensor=~\"$sensor\", node_name!~\"node-0|node-1|node-2\"}[10s]))","fullMetaSearch": false,"includeNullMetadata": true,"instant": true,"legendFormat": "watt_avg {{node_name}}","range": false,"refId": "WATT","useBackend": false},{"datasource": {"name": "Expression","type": "__expr__","uid": "__expr__"},"expression": "(${__to} - ${__from})/1000/3600","hide": false,"refId": "DUR_HOUR","type": "math"},{"datasource": {"name": "Expression","type": "__expr__","uid": "__expr__"},"expression": "$DUR_HOUR * $WATT","hide": false,"refId": "Wh","type": "math"},{"datasource": {"type": "prometheus","uid": "prometheus"},"disableTextWrap": false,"editorMode": "builder","exemplar": false,"expr": "sum(mub_request_latency_milliseconds_sum) / 1000","fullMetaSearch": false,"hide": false,"includeNullMetadata": true,"instant": true,"legendFormat": "__auto","range": false,"refId": "TRTseconds","useBackend": false},{"datasource": {"name": "Expression","type": "__expr__","uid": "__expr__"},"expression": "10000000 / (${Wh} * ${TRTseconds})","hide": false,"refId": "score","type": "math"}],"title": "Score","type": "stat"}],"preload": false,"refresh": "","schemaVersion": 40,"tags": [],"templating": {"list": [{"current": {"text": "Prometheus","value": "prometheus"},"description": "","label": "datasource","name": "ds","options": [],"query": "prometheus","refresh": 1,"regex": "","type": "datasource"},{"allowCustomValue": false,"current": {"text": "PSU1_PIN","value": "PSU1_PIN"},"datasource": {"type": "prometheus","uid": "${ds}"},"definition": "label_values(node_ipmi_power_watts,sensor)","label": "Sensor","name": "sensor","options": [],"query": {"qryType": 1,"query": "label_values(node_ipmi_power_watts,sensor)","refId": "PrometheusVariableQueryEditor-VariableQuery"},"refresh": 1,"regex": "","type": "query"}]},"time": {"from": "now-60m","to": "now"},"timepicker": {},"timezone": "utc","title": "ee-bench-results","uid": "aec2zsgqtnuo0e","version": 6,"weekStart": ""}'
kind: ConfigMap
metadata:
  labels:
    grafana_dashboard: "1"
  name: grafana-dashboard-ee-scheduling-results
---
apiVersion: v1
data:
  mubench.json: '{"annotations": {"list": [{"builtIn": 1,"datasource": {"type": "datasource","uid": "grafana"},"enable": true,"hide": true,"iconColor": "rgba(0, 211, 255, 1)","name": "Annotations & Alerts","target": {"limit": 100,"matchAny": false,"tags": [],"type": "dashboard"},"type": "dashboard"}]},"editable": true,"fiscalYearStartMonth": 0,"graphTooltip": 0,"id": 25,"links": [],"panels": [{"datasource": {"type": "prometheus","uid": "prometheus"},"description": "","fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "auto","barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "linear","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]},"unit": "ms"},"overrides": []},"gridPos": {"h": 8,"w": 12,"x": 0,"y": 0},"id": 25,"options": {"legend": {"calcs": [],"displayMode": "list","placement": "bottom","showLegend": true},"tooltip": {"mode": "single","sort": "none"}},"pluginVersion": "11.4.0","targets": [{"datasource": {"type": "prometheus","uid": "prometheus"},"editorMode": "code","exemplar": true,"expr": "sum by (app_name) (increase(mub_request_processing_latency_milliseconds_sum{}[2m])) / sum by (app_name) (increase(mub_request_processing_latency_milliseconds_count{}[2m]))","interval": "","legendFormat": "{{destination_app}}","range": true,"refId": "A"}],"title": "Service delay","type": "timeseries"},{"datasource": {"type": "prometheus","uid": "prometheus"},"fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "auto","barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "linear","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]},"unit": "reqps"},"overrides": []},"gridPos": {"h": 8,"w": 12,"x": 12,"y": 0},"id": 5,"options": {"legend": {"calcs": [],"displayMode": "list","placement": "bottom","showLegend": true},"tooltip": {"mode": "single","sort": "none"}},"pluginVersion": "11.4.0","targets": [{"datasource": {"type": "prometheus","uid": "prometheus"},"editorMode": "code","exemplar": true,"expr": "sum by (app_name) (rate(mub_internal_processing_latency_milliseconds_count{}[2m]))/1000","interval": "","legendFormat": "{{destination_app}}","range": true,"refId": "A"}],"title": "Service rate (req/s)","type": "timeseries"},{"datasource": {"type": "prometheus","uid": "prometheus"},"fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "auto","barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "linear","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]},"unit": "ms"},"overrides": []},"gridPos": {"h": 8,"w": 12,"x": 0,"y": 8},"id": 21,"options": {"legend": {"calcs": [],"displayMode": "list","placement": "bottom","showLegend": true},"tooltip": {"mode": "single","sort": "none"}},"pluginVersion": "11.4.0","targets": [{"datasource": {"type": "prometheus","uid": "prometheus"},"editorMode": "code","exemplar": true,"expr": "sum by (app_name) (increase(mub_internal_processing_latency_milliseconds_sum{}[2m])) / sum by (app_name) (increase(mub_internal_processing_latency_milliseconds_count{}[2m]))","interval": "","legendFormat": "{{app_name}}","range": true,"refId": "A"}],"title": "Internal service delay ","type": "timeseries"},{"datasource": {},"fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "auto","barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "linear","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]},"unit": "ms"},"overrides": []},"gridPos": {"h": 8,"w": 12,"x": 12,"y": 8},"id": 18,"options": {"legend": {"calcs": [],"displayMode": "list","placement": "bottom","showLegend": true},"tooltip": {"mode": "single","sort": "none"}},"pluginVersion": "11.4.0","targets": [{"datasource": {"type": "prometheus","uid": "prometheus"},"editorMode": "code","exemplar": true,"expr": "sum by (app_name) (increase(mub_external_processing_latency_milliseconds_sum{}[2m])) / sum by (app_name) (increase(mub_external_processing_latency_milliseconds_count{}[2m]))","interval": "","legendFormat": "{{app_name}}","range": true,"refId": "A"}],"title": "External service delay ","type": "timeseries"},{"datasource": {},"fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "left","axisSoftMax": 2,"axisSoftMin": 0,"barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "linear","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]}},"overrides": []},"gridPos": {"h": 8,"w": 12,"x": 0,"y": 16},"id": 34,"options": {"legend": {"calcs": [],"displayMode": "list","placement": "bottom","showLegend": true},"tooltip": {"mode": "single","sort": "none"}},"pluginVersion": "11.4.0","targets": [{"datasource": {"type": "prometheus","uid": "prometheus"},"editorMode": "code","exemplar": true,"expr": "sum by (pod) (increase(container_cpu_usage_seconds_total{pod=~\"ms-[0-9].*\"}[2m])/120)","interval": "","legendFormat": "{{container}}","range": true,"refId": "A"}],"title": "CPU x service","type": "timeseries"},{"datasource": {"type": "prometheus","uid": "prometheus"},"fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "auto","barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "linear","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]},"unit": "decmbytes"},"overrides": []},"gridPos": {"h": 8,"w": 12,"x": 12,"y": 16},"id": 40,"options": {"legend": {"calcs": [],"displayMode": "list","placement": "bottom","showLegend": true},"tooltip": {"mode": "single","sort": "none"}},"pluginVersion": "11.4.0","targets": [{"datasource": {"type": "prometheus","uid": "prometheus"},"editorMode": "code","exemplar": true,"expr": "sum by (pod) (sum_over_time(container_memory_usage_bytes{pod=~\"ms-[0-9].*\"}[2m]) / count_over_time(container_memory_usage_bytes{pod=~\"ms-[0-9].*\"}[2m])) / 1e6","interval": "","legendFormat": "{{container}}","range": true,"refId": "A"}],"title": "Memory x service","type": "timeseries"},{"datasource": {},"fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "left","axisSoftMax": 2,"axisSoftMin": 0,"barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "linear","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]}},"overrides": []},"gridPos": {"h": 8,"w": 12,"x": 0,"y": 24},"id": 43,"options": {"legend": {"calcs": [],"displayMode": "list","placement": "bottom","showLegend": true},"tooltip": {"mode": "single","sort": "none"}},"pluginVersion": "11.4.0","targets": [{"datasource": {"type": "prometheus","uid": "prometheus"},"editorMode": "code","exemplar": true,"expr": "sum by (node) (rate(container_cpu_usage_seconds_total[2m]))","interval": "","legendFormat": "{{node}}","range": true,"refId": "A"}],"title": "CPU x node","type": "timeseries"},{"datasource": {},"description": "","fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "auto","axisSoftMax": 1,"axisSoftMin": 0,"barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "linear","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]},"unit": "percentunit"},"overrides": []},"gridPos": {"h": 8,"w": 12,"x": 12,"y": 24},"id": 12,"options": {"legend": {"calcs": [],"displayMode": "list","placement": "bottom","showLegend": true},"tooltip": {"mode": "single","sort": "none"}},"pluginVersion": "11.4.0","targets": [{"datasource": {"type": "prometheus","uid": "prometheus"},"editorMode": "code","exemplar": true,"expr": "sum by (pod) (increase(container_cpu_usage_seconds_total{pod=~\"ms-[0-9].*\"}[2m])) / (120 * sum by (pod) (kube_pod_container_resource_requests{pod=~\"ms-[0-9].*\"}))","interval": "","legendFormat": "{{container}}","range": true,"refId": "A"}],"title": "CPU usage / CPU requested x Service","type": "timeseries"},{"datasource": {},"fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "auto","barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "linear","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]}},"overrides": []},"gridPos": {"h": 8,"w": 12,"x": 0,"y": 32},"id": 38,"options": {"legend": {"calcs": [],"displayMode": "list","placement": "bottom","showLegend": true},"tooltip": {"mode": "single","sort": "none"}},"pluginVersion": "11.4.0","targets": [{"datasource": {"type": "prometheus","uid": "prometheus"},"editorMode": "code","exemplar": true,"expr": "sum(increase(container_cpu_usage_seconds_total[2m])) by (namespace) / 120","interval": "","legendFormat": "{{namespace}}","range": true,"refId": "A"}],"title": "CPU by namespace","type": "timeseries"},{"datasource": {},"fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "auto","barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "linear","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]},"unit": "decmbytes"},"overrides": []},"gridPos": {"h": 8,"w": 12,"x": 12,"y": 32},"id": 41,"options": {"legend": {"calcs": [],"displayMode": "list","placement": "bottom","showLegend": true},"tooltip": {"mode": "single","sort": "none"}},"pluginVersion": "11.4.0","targets": [{"datasource": {"type": "prometheus","uid": "prometheus"},"editorMode": "code","exemplar": true,"expr": "sum (sum_over_time(container_memory_working_set_bytes{pod=~\"ms-[0-9].*\"}[2m]) / count_over_time(container_memory_working_set_bytes{pod=~\"ms-[0-9].*\"}[2m])) / 1e6","interval": "","legendFormat": "Cluster Memory","range": true,"refId": "A"}],"title": "Memory of Cluster","type": "timeseries"},{"datasource": {"type": "prometheus","uid": "prometheus"},"fieldConfig": {"defaults": {"color": {"mode": "palette-classic"},"custom": {"axisBorderShow": false,"axisCenteredZero": false,"axisColorMode": "text","axisLabel": "","axisPlacement": "auto","axisSoftMax": 2,"axisSoftMin": 0,"barAlignment": 0,"barWidthFactor": 0.6,"drawStyle": "line","fillOpacity": 0,"gradientMode": "none","hideFrom": {"legend": false,"tooltip": false,"viz": false},"insertNulls": false,"lineInterpolation": "linear","lineWidth": 1,"pointSize": 5,"scaleDistribution": {"type": "linear"},"showPoints": "auto","spanNulls": false,"stacking": {"group": "A","mode": "none"},"thresholdsStyle": {"mode": "off"}},"mappings": [],"thresholds": {"mode": "absolute","steps": [{"color": "green","value": null},{"color": "red","value": 80}]}}},"gridPos": {"h": 8,"w": 12,"x": 0,"y": 40},"id": 36,"options": {"legend": {"calcs": [],"displayMode": "list","placement": "bottom","showLegend": true},"tooltip": {"mode": "single","sort": "none"}},"pluginVersion": "11.4.0","targets": [{"datasource": {"type": "prometheus","uid": "prometheus"},"exemplar": true,"expr": "sum by (node) (kube_pod_container_resource_requests{pod=~\"ms-[0-9].*\", resource=\"cpu\"})","interval": "","legendFormat": "{{node}}","refId": "A"}],"title": "CPU req x Node","type": "timeseries"}],"preload": false,"refresh": "10s","schemaVersion": 40,"tags": [],"templating": {"list": []},"time": {"from": "now-15m","to": "now"},"timepicker": {"refresh_intervals": ["5s","10s","15s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone": "","title": "ÂµBench-dashboard","uid": "6IBeJ-b7k","version": 1,"weekStart": ""}'
kind: ConfigMap
metadata:
  labels:
    grafana_dashboard: "1"
  name: grafana-dashboard-mubench
